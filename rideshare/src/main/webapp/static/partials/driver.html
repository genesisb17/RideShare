<!-- Tabs that display active rides and ride history for a user -->
<div>

	<!-- Nav tabs -->
	<ul class="nav nav-tabs" role="tablist">
		<li role="presentation" class="active"><a href="#open"
			aria-controls="open" role="tab" data-toggle="tab" target="_self">Available</a></li>
		<li role="presentation"><a href="#active" aria-controls="active"
			role="tab" data-toggle="tab" target="_self">In Progress</a></li>
		<li role="presentation"><a href="#history"
			aria-controls="history" role="tab" data-toggle="tab" target="_self">History</a></li>
	</ul>

	<!-- Tab panes -->
	<div class="tab-content">

		<div role="tabpanel" class="tab-pane active" id="open">

			<br> <select ng-model="selectedItem"
				ng-options="poi.poiName for poi in allPoi" ng-change="updateSort()"></select>
			<br> <br>

			<!-- html and angular function used to display open rides -->
			<ul style="list-style-type: none;">

				<li ng-if="openRequest.length == 0">No open requests for this
					point of intrest</li>

				<li ng-repeat="ride in openRequest">Time: {{ride.time}}<br>
					Pick up at: {{ride.pickupLocation.poiName}},
					{{ride.pickupLocation.addressLine1}} <br> Drop off at:
					{{ride.dropOffLocation.poiName}},
					{{ride.dropOffLocation.addressLine1}}<br> Rider:
					{{ride.user.fullName}} <br> Rider note: {{ride.notes}} <span
					ng-show=" ride.notes == null"> n/a </span> <br> <br>

				</li>

			</ul>

		</div>

		<div role="tabpanel" class="tab-pane" id="active">

			<!-- html and angular function used to display open rides -->
			<ul style="list-style-type: none;">

				<li ng-if="activeRides.length == 0">No active rides</li>

				<li ng-repeat="ride in activeRides">Time:
					<span data-toggle="collapse" data-target="#{{ride.availRide.availRideId}}">
					{{ride.availRide.time}}<br> Pick up at:
					{{ride.availRide.pickupPOI.poiName}},
					{{ride.availRide.pickupPOI.addressLine1}} <br> Drop off at:
					{{ride.availRide.dropoffPOI.poiName}},
					{{ride.availRide.dropoffPOI.addressLine1}}<br> Driver:
					{{ride.availRide.car.user.fullName}}<br> Driver note:
					{{ride.availRide.car.notes}} 
					</span>
					<span
					ng-show="ride.availRide.car.notes == null"> n/a </span> <br>
					<div id="{{ride.availRide.availRideId}}" class="collapse">
						<div ng-show="isArray(ride.request)">
						<p ng-repeat="request in ride.request">
						
						Rider: {{request.user.fullName}}
						<br> Rider note:
						{{request.notes}} 
						
						</p> 
						</div>
						<div ng-show="!isArray(ride.request)">
						Rider: {{ride.request.user.fullName}}
						<br> Rider note:
						{{ride.request.notes}} 
						</div>
					</div>
					<button type="submit" class="btn btn-primary"
						ng-click="offerCancel(ride.availRide.availRideId)">Cancel Offer
					</button>

				</li>

			</ul>

		</div>

		<div role="tabpanel" class="tab-pane" id="history">


			<ul style="list-style-type: none;">

				<li ng-if="pastRides.length == 0">No ride history</li>



				<li ng-repeat="ride in pastRides">Time: {{ride.availRide.time}}<br>
					Pick up at: {{ride.availRide.pickupPOI.poiName}},
					{{ride.availRide.pickupPOI.addressLine1}} <br> Drop off at:
					{{ride.availRide.dropoffPOI.poiName}},
					{{ride.availRide.dropoffPOI.addressLine1}}<br> Driver:
					{{ride.availRide.car.user.fullName}}<br> Driver note:
					{{ride.availRide.car.notes}} <span
					ng-show=" ride.availRide.car.notes == null"> n/a </span> <br>
					Rider: {{ride.request.user.fullName}} <br> Rider note:
					{{ride.request.notes}} <span ng-show=" ride.request.notes == null">
						n/a </span> <br> Compliant: {{ride.compliant}} <span
					ng-show=" ride.compliant == null"> n/a </span> <br> <br>

				</li>

			</ul>

		</div>

	</div>

</div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal"
	data-target="#myModal">Make offer</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title" id="myModalLabel">Modal title</h4>
			</div>
			<div class="modal-body">

				<form>
					<select ng-model="pickup"
						ng-options="poi.poiName for poi in allPoi" required="required">
						<option style="display: none" value="">select pickup
							location</option>
					</select> <br> <select ng-model="dropoff"
						ng-options="poi.poiName for poi in allPoi" required="required">
						<option style="display: none" value="">select dropoff
							location</option>
					</select> <br> <input type="text" ng-model="notes" placeholder="notes" />
					<br> <input type="number" ng-model="seats"
						placeholder="avalible seaats" /> <br> <input
						type="datetime-local" ng-model="time" placeholder="time" /> <br>

					<button type="submit" class="btn btn-primary"
						ng-click="addOffer(pickup,dropoff,notes,time,seats)"
						data-dismiss="modal">Save changes</button>
				</form>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
